input {
	file {
		path => "/usr/share/_articles/*.json"
		codec => "json"
		sincedb_path => "/dev/null"
		start_position => "beginning"
		mode => "read"
		tags => "article"
	}
}

# ## Add your filters / logstash plugins configuration here
filter {
	mutate {
		remove_field => ["[event]", "[log]", "path", "host", ["geoip"]]
	}
}

output {
	elasticsearch {
		hosts => [ "http://elasticsearch:9200", "http://elasticsearch:9201", "http://elasticsearch:9202" ]
		user => "logstash_internal"
		password => "${LOGSTASH_INTERNAL_PASSWORD}"
		index => "logstash-articles-%{+yyyy.MM.dd}"
		document_id => "%{url}"
		action => "index"
	}
}
